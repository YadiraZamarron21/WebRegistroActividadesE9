@using System.Security.Claims
@model RegistroActividadesE9.Areas.Usuario.Models.AgregarActivViewModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "~/Views/Shared/Layout.cshtml";
}
<main class="aggPub">
    <div class="container3">
        <h2>Agregar Actividad</h2>
        <form action="~/Usuario/Home/Agregar" method="post" enctype="multipart/form-data">
           
          <div class="form-group">

                <input type="hidden" name="id" id="id">

                <label for="titulo">Título de la Actividad:</label>
                <input type="text" id="titulo" asp-for="titulo" name="titulo" required>

            </div>
            <div class="form-group">
                <label for="fechaRealizacion">Fecha de realizacion</label>
                <input type="date" asp-for="fechaRealizacion">
            </div>
        
            <div class="form-group">
                <label for="descripcion">Descripción:</label>
                <textarea id="descripcion" name="descripcion" asp-for="descripcion" rows="4" required></textarea>
            </div>
        
            <div class="form-group">
                <label for="imagenes">Seleccionar Imágenes:</label>
                <input class="actividad-form-input" type="file"
                       accept="image/*" asp-for="archivo" id="imagenes" >

                <div class="actividad-form-img-preview">
                    <img src="~/img/preview-img.svg" height="100%" alt="imagen" class="actividad-form-img">
                </div>
               
            </div>
            <p id="error">@Html.ValidationSummary(true)</p>

            <div class="form-group button-group">
                <a> <input type="submit" class="accept-button" value="Publicar"></a>
                <a>
                    <input type="submit" class="accept-button" value="Guardar" asp-action="Borrador">
                </a>
                <a href="~/Usuario/Home">
                    <input type="button" class="cancel-button" value="Cancelar">
                </a>
            </div>

            <script>
                let preview = document.querySelector('.actividad-form-img-preview img');
                let input = document.querySelector('.actividad-form-input[type="file"]');
                input.addEventListener('change', function () {
                    let file = input.files[0];
                    let reader = new FileReader();
                    reader.onload = function (e) {
                        preview.src = e.target.result;
                    }
                    reader.readAsDataURL(file);
                });
                document.querySelector('.actividad-form-img-preview').addEventListener('click', function () {
                    input.click();
                });
            </script>
        </form>
    </div>
</main>